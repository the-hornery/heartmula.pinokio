{
  "requires": {
    "bundle": "ai"
  },
  "run": [
    {
      "method": "shell.run",
      "params": {
        "message": "git clone https://github.com/HeartMuLa/heartlib.git app"
      }
    },
    {
      "method": "shell.run",
      "params": {
        "path": "app",
        "venv": "env",
        "message": "uv pip install -e ."
      }
    },
    {
      "method": "shell.run",
      "params": {
        "path": "app",
        "venv": "env",
        "message": "uv pip install huggingface_hub[hf-xet] gradio pydub uvicorn[standard] websockets wsproto datasets==2.20.0"
      }
    },
    {
      "method": "script.start",
      "params": {
        "uri": "torch.js",
        "params": {
          "venv": "env",
          "path": "app",
          "xformers": true,
          "triton": true
        }
      }
    },
    {
      "method": "hf.download",
      "params": {
        "_": ["HeartMuLa/HeartMuLaGen"],
        "local-dir": "ckpt"
      }
    },
    {
      "method": "hf.download",
      "params": {
        "_": ["HeartMuLa/HeartMuLa-oss-3B"],
        "local-dir": "ckpt/HeartMuLa-oss-3B"
      }
    },
    {
      "method": "hf.download",
      "params": {
        "_": ["HeartMuLa/HeartCodec-oss"],
        "local-dir": "ckpt/HeartCodec-oss"
      }
    }
  ]
}